<div class="panel panel-transparent">
  <div class="panel-body">
    <div class="col-md-9 col-md-offset-3 form-help-header">
      <h3 class="help-header">Update DOI (Form)</h3>
      <div class="help-block">
        More information about DOI registration via form can be found on our <a target="_blank" rel="noopener" href="https://support.datacite.org/docs/fabrica-create-doi-form">Support
          Website</a>. Required fields are marked with a red asterix.
      </div>
    </div>
    <BsForm @formLayout="horizontal" @horizontalLabelGridClass="col-md-3" @model={{model}} @onSubmit={{action "submit" model}} as |form|>
      {{#if (feature-flag 'optionalFields')}}
        <h3 class="member-results">Required Fields</h3>
      {{/if}}

      <form.element @class="required-nested-label" @controlType="text" @id="doi" @label="DOI" @property="doi" @helpText="The globally unique string that identifies the resource and can't be changed." @disabled={{true}} />
      
      <DoiState @class="required-nested-label" @model={{model}} @form={{form}} />

      <form.element @class="required-nested-label" @id="url" @controlType="text" @label="URL" @property="url" @helpText="The location of the landing page with more information about the resource."  @required={{false}} />

      <DoiCreators @model={{model}} @form={{form}} />
      <DoiTitles @model={{model}} @form={{form}} />

      <form.element @class="required-nested-label" @id="publisher" @controlType="text" @label="Publisher" @property="publisher" @helpText="The name of the entity that
      holds, archives, publishes prints, distributes, releases, issues, or produces the resource." @required={{false}} />
      <form.element @class="required-nested-label" @id="publication-year" @controlType="text" @label="Publication Year" @property="publicationYear" @helpText="The year when the
      resource was or will be made publicly available. Must be between 1450 and 2021." @required={{false}} />

      <DoiTypes @class="required-nested-label" @model={{model}} @form={{form}} />
      
      {{#if (feature-flag 'optionalFields')}}
        <h3 class="member-results">Recommended Fields</h3>
      {{/if}}

      <DoiDescriptions @model={{model}} @form={{form}} />

      {{#if (feature-flag 'optionalFields')}}
        <DoiSubjects @model={{model}} @form={{form}} />
        <DoiContributors @model={{model}} @form={{form}} />
        <DoiDates @model={{model}} @form={{form}} />
        <DoiRelatedIdentifiers @model={{model}} @form={{form}} />
        <DoiGeoLocations @model={{model}} @form={{form}} />

        <h3 class="member-results">Optional Fields</h3>

        <DoiLanguage @model={{model}} @form={{form}} />
        <DoiAlternateIdentifiers @model={{model}} @form={{form}} />
        <DoiRightsList @model={{model}} @form={{form}} @spdx={{spdx}} />
        <DoiSizes @model={{model}} @form={{form}} />
        <DoiFormats @model={{model}} @form={{form}} />

        <form.element @id="version" @controlType="text" @placeholder="Version" @label="Version" @property="version" @helpText="The version number of the resource. "  @required={{false}} data-test-version/>

        <DoiFundingReferences @model={{model}} @form={{form}} />
      {{/if}}

      <div class="col-md-9 col-md-offset-3">
        {{#if (is-empty (doi-form-errors model))}}
          <button type="submit" id="doi-update" class="btn btn-sm btn-fill" disabled={{false}}>Update DOI</button>
        {{else}}
          <BsAlert @dismissible={{false}} @type="danger">
            To save this DOI, first resolve the errors with these fields: {{doi-form-errors model}}.
          </BsAlert>

          <button type="submit" id="doi-update" class="btn btn-sm btn-fill" disabled={{true}}>Update DOI</button>          
        {{/if}}

        <button {{action "cancel"}} class="btn btn-sm">Cancel</button>
      </div>
    </BsForm>

  </div>
</div>
