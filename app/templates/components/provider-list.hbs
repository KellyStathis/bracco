<div class="col-md-3">
  {{#if (can "create provider")}}
    <div class="panel facets">
      <div class="panel-body">
        <div class="btn-toolbar">
          <div class="btn-group btn-group-sm">
            <LinkTo @route="providers.new" class="btn btn-warning" @id="new-provider">{{fa-icon "plus"}} Add Member</LinkTo>
          </div>
        </div>
      </div>
    </div>
  {{else}}
    <div class="panel panel-transparent">
      <div class="panel-body">
        <div class="edit"></div>
      </div>
    </div>
  {{/if}}

  {{#if (or model.meta.years model.query.year)}}
    <div class="panel facets add">
      <div class="panel-body">
        <h4>Year joined</h4>
        <ul>
          {{#if model.meta.years}}
            {{#each model.meta.years as |year|}}
              <li>
                {{#if model.query.year}}
                  <LinkTo @route="providers" @query={{hash year=""}}>{{fa-icon "check-square-o"}}</LinkTo>
                {{else}}
                  <LinkTo @route="providers" @query={{hash year=year.id}}>{{fa-icon "square-o"}}</LinkTo>
                {{/if}}
                <div class="facet-title">{{year.title}}</div>
                <span class="number pull-right">{{year.count}}</span>
                <div class="clearfix"/>
              </li>
            {{/each}}
          {{else}}
            <li>
              <LinkTo @route="providers" @query={{hash year=""}}>{{fa-icon "check-square-o"}}</LinkTo>
              <div class="facet-title">{{model.query.year}}</div>
              <span class="number pull-right">0</span>
              <div class="clearfix"/>
            </li>
          {{/if}}
        </ul>
      </div>
    </div>
  {{/if}}
  {{#if (or model.meta.regions model.query.region)}}
    <div class="panel facets">
      <div class="panel-body">
        <h4>Region</h4>
        <ul>
          {{#if model.meta.regions}}
            {{#each model.meta.regions as |region|}}
              <li>
                {{#if model.query.region}}
                  <LinkTo @route="providers" @query={{hash region=''}}>{{fa-icon "check-square-o"}}</LinkTo>
                {{else}}
                  <LinkTo @route="providers" @query={{hash region=region.id}}>{{fa-icon "square-o"}}</LinkTo>
                {{/if}}
                <div class="facet-title">{{region.title}}</div>
                <span class="number pull-right">{{region.count}}</span>
                <div class="clearfix"/>
              </li>
            {{/each}}
          {{else}}
            <li>
              <LinkTo @route="providers" @query={{hash region=''}}>{{fa-icon "check-square-o"}}</LinkTo>
              <div class="facet-title">{{model.query.region}}</div>
              <span class="number pull-right">0</span>
              <div class="clearfix"/>
            </li>
          {{/if}}
        </ul>
      </div>
    </div>
  {{/if}}
  {{#if (can "create provider")}}
    {{#if (or model.meta.memberTypes model.query.member-type)}}
      <div class="panel facets">
        <div class="panel-body">
          <h4>Member Type</h4>
          <ul>
            {{#if model.meta.memberTypes}}
              {{#each model.meta.memberTypes as |memberType|}}
                <li>
                  {{#if model.query.member-type}}
                    <LinkTo @route="providers" @query={{hash member-type=''}}>{{fa-icon "check-square-o"}}</LinkTo>
                  {{else}}
                    <LinkTo @route="providers" @query={{hash member-type=memberType.id}}>{{fa-icon "square-o"}}</LinkTo>
                  {{/if}}
                  <div class="facet-title">{{memberType.title}}</div>
                  <span class="number pull-right">{{memberType.count}}</span>
                  <div class="clearfix"/>
                </li>
              {{/each}}
            {{else}}
              <li>
                <LinkTo @route="providers" @query={{hash member-type=''}}>{{fa-icon "check-square-o"}}</LinkTo>
                <div class="facet-title"><model.query.member-type /></div>
                <span class="number pull-right">0</span>
                <div class="clearfix"/>
              </li>
            {{/if}}
          </ul>
        </div>
      </div>
    {{/if}}
    {{#if (or model.meta.nonProfitStatuses model.query.non-profit-status)}}
      <div class="panel facets">
        <div class="panel-body">
          <h4>Tax Status</h4>
          <ul>
            {{#if model.meta.nonProfitStatuses}}
              {{#each model.meta.nonProfitStatuses as |nonProfitStatus|}}
                <li>
                  {{#if model.query.non-profit-status}}
                    <LinkTo @route="providers" @query={{hash non-profit-status=''}}>{{fa-icon "check-square-o"}}</LinkTo>
                  {{else}}
                    <LinkTo @route="providers" @query={{hash non-profit-status=nonProfitStatus.id}}>{{fa-icon "square-o"}}</LinkTo>
                  {{/if}}
                  <div class="facet-title">{{nonProfitStatus.title}}</div>
                  <span class="number pull-right">{{nonProfitStatus.count}}</span>
                  <div class="clearfix"/>
                </li>
              {{/each}}
            {{else}}
              <li>
                <LinkTo @route="providers" @query={{hash non-profit-status=''}}>{{fa-icon "check-square-o"}}</LinkTo>
                <div class="facet-title"><model.query.non-profit-status /></div>
                <span class="number pull-right">0</span>
                <div class="clearfix"/>
              </li>
            {{/if}}
          </ul>
        </div>
      </div>
    {{/if}}
    {{#if (or model.meta.organizationTypes model.query.organization-type)}}
      <div class="panel facets">
        <div class="panel-body">
          <h4>Organization Type</h4>
          <ul>
            {{#if model.meta.organizationTypes}}
              {{#each model.meta.organizationTypes as |organizationType|}}
                <li>
                  {{#if model.query.organization-type}}
                    <LinkTo @route="providers" @query={{hash organization-type=''}}>{{fa-icon "check-square-o"}}</LinkTo>
                  {{else}}
                    <LinkTo @route="providers" @query={{hash organization-type=organizationType.id}}>{{fa-icon "square-o"}}</LinkTo>
                  {{/if}}
                  <div class="facet-title">{{organizationType.title}}</div>
                  <span class="number pull-right">{{organizationType.count}}</span>
                  <div class="clearfix"/>
                </li>
              {{/each}}
            {{else}}
              <li>
                <LinkTo @route="providers" @query={{hash organization-type=''}}>{{fa-icon "check-square-o"}}</LinkTo>
                <div class="facet-title"><model.query.organization-type /></div>
                <span class="number pull-right">0</span>
                <div class="clearfix"/>
              </li>
            {{/if}}
          </ul>
        </div>
      </div>
    {{/if}}
    {{#if (or model.meta.focusAreas model.query.focus-area)}}
      <div class="panel facets">
        <div class="panel-body">
          <h4>Focus Area</h4>
          <ul>
            {{#if model.meta.focusAreas}}
              {{#each model.meta.focusAreas as |focusArea|}}
                <li>
                  {{#if model.query.focus-area}}
                    <LinkTo @route="providers" @query={{hash focus-area=''}}>{{fa-icon "check-square-o"}}</LinkTo>
                  {{else}}
                    <LinkTo @route="providers" @query={{hash focus-area=focusArea.id}}>{{fa-icon "square-o"}}</LinkTo>
                  {{/if}}
                  <div class="facet-title">{{focusArea.title}}</div>
                  <span class="number pull-right">{{focusArea.count}}</span>
                  <div class="clearfix"/>
                </li>
              {{/each}}
            {{else}}
              <li>
                <LinkTo @route="providers" @query={{hash focus-area=''}}>{{fa-icon "check-square-o"}}</LinkTo>
                <div class="facet-title"><model.query.focus-area /></div>
                <span class="number pull-right">0</span>
                <div class="clearfix"/>
              </li>
            {{/if}}
          </ul>
        </div>
      </div>
    {{/if}}
  {{/if}}
</div>
<div class="col-md-9 panel-list" id="content">
  {{#if searchable}}
    <ModelSearch @model={{model}} @sortable={{true}} @name="Member" @link="providers" />
  {{/if}}

  {{#if model}}
    {{#each model as |provider|}}
      <div class="panel panel-transparent" data-test-provider>
        <div class="panel-body">
          <h3 class="work">
            <LinkTo @route="providers.show" @model={{provider.id}}>{{provider.displayName}}</LinkTo>
            {{#if (not provider.isActive)}}
              <span class="small icon-warning">account not active</span>
            {{/if}}
          </h3>

          <h5>Member ID</h5>
          {{provider.symbol}}

          {{#if provider.rorId}}
            <h5>ROR ID</h5>
            <a href="{{provider.rorId}}">{{provider.rorId}}</a>
          {{/if}}

          <h5>Member Type</h5>
          {{titleize (humanize (underscore provider.memberType))}}

          <h5>Tax Status</h5>
          {{titleize provider.nonProfitStatus}}

          {{#if provider.organizationType}}
            <h5>Organization Type</h5>
            {{titleize (humanize (underscore provider.organizationType))}}
          {{/if}}

          {{#if provider.focusArea}}
            <h5>Focus Area</h5>
            {{titleize (humanize (underscore provider.focusArea))}}
          {{/if}}
        </div>
      </div>
    {{/each}}
    <div class="text-center">
      {{#if (gt model.meta.totalPages 1)}}
        <PageNumbers @model={{model}} @link="providers" />
      {{/if}}
    </div>
  {{else}}
    <BsAlert @dismissible={{false}} @type="warning">
      No providers found.
    </BsAlert>
  {{/if}}
</div>
